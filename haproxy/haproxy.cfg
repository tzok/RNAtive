global
    daemon
    log stdout local0 info

defaults
    mode http
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms
    option httplog
    log global

# Frontend for adapters service
frontend adapters_frontend
    bind *:8001
    default_backend adapters_backend

# Backend for adapters service
backend adapters_backend
    balance roundrobin
    option httpchk GET /health
    server adapters-1 adapters:80 check
    server adapters-2 adapters:80 check
    server adapters-3 adapters:80 check
    server adapters-4 adapters:80 check
    server adapters-5 adapters:80 check
    server adapters-6 adapters:80 check

# Frontend for rnapolis service
frontend rnapolis_frontend
    bind *:8002
    default_backend rnapolis_backend

# Backend for rnapolis service
backend rnapolis_backend
    balance roundrobin
    option httpchk GET /health
    server rnapolis-1 rnapolis:8000 check
    server rnapolis-2 rnapolis:8000 check
    server rnapolis-3 rnapolis:8000 check
    server rnapolis-4 rnapolis:8000 check
    server rnapolis-5 rnapolis:8000 check
    server rnapolis-6 rnapolis:8000 check

# Frontend for varna-tz service
frontend varna_tz_frontend
    bind *:8003
    default_backend varna_tz_backend

# Backend for varna-tz service
backend varna_tz_backend
    balance roundrobin
    option httpchk GET /health
    server varna-tz-1 varna-tz:8000 check
    server varna-tz-2 varna-tz:8000 check
    server varna-tz-3 varna-tz:8000 check
    server varna-tz-4 varna-tz:8000 check
    server varna-tz-5 varna-tz:8000 check
    server varna-tz-6 varna-tz:8000 check

# Frontend for rchie service
frontend rchie_frontend
    bind *:8004
    default_backend rchie_backend

# Backend for rchie service
backend rchie_backend
    balance roundrobin
    option httpchk GET /health
    server rchie-1 rchie:8000 check
    server rchie-2 rchie:8000 check
    server rchie-3 rchie:8000 check
    server rchie-4 rchie:8000 check
    server rchie-5 rchie:8000 check
    server rchie-6 rchie:8000 check
